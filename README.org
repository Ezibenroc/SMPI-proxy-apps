# SMPI-benchmarks

Proxy apps are scale models of real, massive HPC applications: each of
them exhibits the same communication and computation patterns than the
massive application that it stands for. But they last only a few
thousands lines instead of some millions of lines. These proxy
apps are usually provided for educational purpose, and also to ensure
that the represented large HPC applications will correctly work with
the next generation of runtimes and hardware. See also
[[http://lightsighter.org/posts/miniappredicament.html][this
explanation]] of the proxy apps' purpose.

SMPI is an implementation of MPI executing the application on top of
the SimGrid simulator. This allows to study the application behavior
in many details that would be hard to observe if not in a simulator,
or on platforms that do not exist yet. The predictive power of SMPI
was shown to be very good, provided that you correctly model the
target platform.

This repository gathers several collections of proxy apps, and reports
their support by the SMPI implementation. This is tested nightly on a
[[https://ci.inria.fr/simgrid/job/SMPI-proxy-apps/][dedicated jenkins server]].

The graphe below gives an idea about the success rate of tests that have been run using smpi : 

[[https://ci.inria.fr/simgrid/job/SMPI-proxy-apps/test/trend?failureOnly=false]]

** Legend 
| Symbol  | Meaning | Symbol | Meaning |
|---------+---------+--------+---------|
| :white_check_mark: | Pass | :wrench: | Need some adjustments |
| :x: | Failed | :warning: | Issue has come during the process |
| :book: | Compilation instructions | :package: | Source code |
| :sunny: | Execution is done successfully | :gear: | Compilation is done successfully |
| :partly_sunny: | Done successfully but with some warnings | :construction: |  SMPI missing feature |
| :lock: | Deadlock | :heavy_minus_sign: | Execution is not done yet |
| :beetle: | Has an opened issue |  |  |

* [[https://asc.llnl.gov/CORAL-benchmarks/][CORAL]] benchmark codes 
| Benchmark  | Ref | Lines | paral | Lang | SMPI |
|------------+-----+-------+-------+------+------|
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Coral.org#amg2013][amg2013]] | [[https://asc.llnl.gov/CORAL-benchmarks/Summaries/AMG2013_Summary_v2.3.pdf][:book:]] [[https://asc.llnl.gov/CORAL-benchmarks/Throughput/amg20130624.tgz][:package:]] | 75,000 | MPI, OMP | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Coral.org#hacc_io][HACCIO]] | [[https://asc.llnl.gov/CORAL-benchmarks/Summaries/HACC_IO_Summary_v1.0.pdf][:book:]] [[https://asc.llnl.gov/CORAL-benchmarks/Skeleton/HACC_IO.tar.gz][:package:]] | 2,000 | MPI | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Coral.org#kmi_hash][KMI_HASH]] | [[https://asc.llnl.gov/CORAL-benchmarks/Summaries/KMI_Summary_v1.1.pdf][:book:]] [[https://asc.llnl.gov/CORAL-benchmarks/Datacentric/KMI_HASH_CORAL.tar.gz][:package:]]| 4,239 | MPI | C | :gear: :sunny: |

*** Disabled Apps
Using OpenMP: UMT2013 ([[https://asc.llnl.gov/CORAL-benchmarks/Summaries/UMT2013_Summary_v1.2.pdf][:book:]][[https://asc.llnl.gov/CORAL-benchmarks/Throughput/UMT2013-20140204.tar.gz][:package:]]), MCB ([[https://asc.llnl.gov/CORAL-benchmarks/Summaries/MCB_Summary_v1.1.pdf][:book:]][[https://asc.llnl.gov/CORAL-benchmarks/Throughput/mcb-20130723.tar.gz][:package:]]), QMCPACK ([[https://asc.llnl.gov/CORAL-benchmarks/Summaries/QMCPACK_Summary_v1.2.pdf][:book:]][[https://asc.llnl.gov/CORAL-benchmarks/Throughput/qmcpack-coral20131203.tar.gz][:package:]]), LULESH ([[https://asc.llnl.gov/CORAL-benchmarks/Summaries/LULESH_Summary_v1.pdf][:book:]][[https://asc.llnl.gov/CORAL-benchmarks/Throughput/lulesh2.0.3.tgz][:package:]]), integer_sort ([[https://asc.llnl.gov/CORAL-benchmarks/Summaries/BigSort_Summary_v1.1.pdf][:book:]][[https://asc.llnl.gov/CORAL-benchmarks/Datacentric/BigSort-20130808.tar.bz2][:package:]]),
CLOMP ([[https://asc.llnl.gov/CORAL-benchmarks/Summaries/CLOMP_Summary_v1.2.pdf][:book:]][[https://asc.llnl.gov/CORAL-benchmarks/Skeleton/clomp_v1.2.tar.gz][:package:]]).

Because of other dependencies
| Benchmark | Ref | Lines | Dependency |
|-----------|-----|-------|------------|
| LSMS | [[https://asc.llnl.gov/CORAL-benchmarks/Summaries/LSMS_Summary_v1.1.pdf][:book:]][[https://asc.llnl.gov/CORAL-benchmarks/Science/LSMS_3_rev237.tar.bz2][:package:]] | 200,000 |  HDF5 |
| QBOX | [[https://asc.llnl.gov/CORAL-benchmarks/Summaries/QBox_Summary_v1.2.pdf][:book:]][[https://asc.llnl.gov/CORAL-benchmarks/Science/qball_r140b.tgz][:package:]] | 47,000 |OpenMP, Blas, LAPACK | 
| CAM-SE | [[https://asc.llnl.gov/CORAL-benchmarks/Summaries/CAMSE_Summary_v1.1.pdf][:book:]][[https://asc.llnl.gov/CORAL-benchmarks/Throughput/homme1_3_6_mira_2.tgz][:package:]] | 150,000 | NETCDF, Lapack, cBlas |
| NAMD | [[https://asc.llnl.gov/CORAL-benchmarks/Summaries/NAMD_Summary_v1.0.pdf][:book:]][[https://asc.llnl.gov/CORAL-benchmarks/Throughput/namd-src.tar.gz][:package:]] | 180,000 | mpixlc |
| IOR | [[https://asc.llnl.gov/CORAL-benchmarks/Summaries/IOR_Summary_v1.0.pdf][:book:]][[https://asc.llnl.gov/CORAL-benchmarks/Skeleton/IOR.CORAL.1.tar.gz][:package:]] | 4,000 | MPIICC |

Using the Python programming language: Pynmaic.

MPI not used: Graph500, SPECint2006"peak", Memory benchmarks, CLOMP, FTQ, XSBench, NEKbonemk, HACCmk, UMTmk, AMGmk, MILCmk, GFMCmk.

* [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/][Trinity-Nersc]] benchmark codes
| Benchmark  | Ref | Lines | paral | Lang | SMPI |
|------------+-----+-------+-------+------+------|
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#smb_mpioverheader][SMB - mpiheader]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/smb/][:book:]] [[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/Jan9/smb1.0-1.tar][:package:]] | 418 | MPI | C  | :gear: :lock: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#smb_msgrate][SMB - msgrate]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/smb/][:book:]] | 362 | MPI | C | :gear: :sunny: | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#ziatest][ziatest]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/ziatest/][:book:]] [[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/Jan9/ziatest.tar][:package:]] | 255 | MPI | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#mdtest][mdtest]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/mdtest/][:book:]][[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/Mar29/mdtest-1.8.4.tar][:package:]] | 2,187 | MPI | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#mpimemu][mpimemu]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/mpimemu/][:book:]] [[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/July5/mpimemu-1.0-rc6July5.tar][:package:]] | 4,980 | MPI | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#pt2pt][OMB_MPI Tests (pt2pt)]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/omb-mpi-tests/][:book:]] [[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/July12/osu-micro-benchmarks-3.8-July12.tar][:package:]] | 1,406 | MPI | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#one-sided][OMB_MPI Tests (one-sided)]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/omb-mpi-tests/][:book:]] [[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/July12/osu-micro-benchmarks-3.8-July12.tar][:package:]] | 1,679 | MPI | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#collective][OMB_MPI Tests (collective)]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/omb-mpi-tests/][:book:]] [[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/July12/osu-micro-benchmarks-3.8-July12.tar][:package:]] | 1,269 | MPI | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#minife][MiniFE]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/minife/][:book:]] [[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/Feb22/MiniFE_ref_1.4b.tar][:package:]] | 4,968 | MPI | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#gtc][GTC]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/gtc/][:book:]][[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/May31/TrN8GTCMay30.tar][:package:]] | 5,591 | MPI, OMP | F90 | :gear: :white_check_mark: :warning: | 
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#milc][MILC]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/milc/][:book:]][[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/May31/TrN8MILC7May30.tar][:package:]] | 82,645 | MPI, OMP | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Trinity-Nersc.org#minidft][MiniDFT]] | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/minidft/][:book:]][[http://qe-forge.org/gf/download/frsrelease/144/456/MiniDFT-1.06.tar.gz][:package:]] | 30,874 | MPI, OMP | C, F90 | :heavy_minus_sign: |

*** Disabled Apps
MPI not used: psnap ([[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/psnap/][:book:]][[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/June28/psnap-1.2June28.tar][:package:]]), Stream ([[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/stream/][:book:]][[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/Jan9/stream.tar][:package:]]) 

Because of other dependencies
| Benchmark | Ref | Dependency |  
|-----------|-----|------------|
| UPC-FC | [[http://www.nersc.gov/users/computational-systems/cori/nersc-8-procurement/trinity-nersc-8-rfp/nersc-8-trinity-benchmarks/npb-upc-ft/][:book:]][[http://www.nersc.gov/assets/Trinity--NERSC-8-RFP/Benchmarks/Jan9/UPC-FT.tar][:package:]] | FFTW |

Using unsuitable language : UMT (Python).



* [[https://repository.prace-ri.eu/git/PRACE/CodeVault][CodeVault]] benchmark codes 
| Benchmark  |  Lines | paral | Lang | SMPI |
|------------+--------+-------+------+------|
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/CodeVault.org#unstructured_grids][Unstructured_grids (halo exchange)]] |1,114 | MPI, PTHREAD | C++ | :x: :construction: :heavy_minus_sign: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/CodeVault.org#parallel_io][Parallel_io]] | 1,338 | MPI | C++ | :x: :construction: :heavy_minus_sign: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/CodeVault.org#integral-basic][MCM (integral_basic)]] | 1,351 | MPI, OMP | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/CodeVault.org#pi][MCM (pi)]] | 1,325 | MPI, OMP | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/CodeVault.org#prng][MCM (prng)]] | 1,351 | MPI, OMP | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/CodeVault.org#dyn-sparse][n-Body_methods (dyn sparse)]] | 2,401 | MPI | C++ | :gear: :sunny: |

*** Disabled Apps
Using OpenMP : Dense_linear_algebra, N-body_methods (bhtree, hermite4, naive), Structured_grids.

Because of other dependencies
| Benchmark | Dependency |
|-----------|------------|
| Sparse_linear_algebra | PETSc |
| Spectral_methods | OpenMP, CUDA, OpenCL, FFTW |
| Unstructured_grids (libmesh) | libmesh |

Issues : n-body_methods-bhtree_mpi (issue with Body.cpp)

* [[https://proxyapps.exascaleproject.org/app/][ECP]] Proxy Applications 
| Benchmark  | Lines | paral | Lang | SMPI |
|------------+-------+-------+------+------|
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#amg][AMG]] | 4,658 | MPI, OMP | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#clamr][CLAMR]] | 109,477 | MPI | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#comd][CoMD]] | 4,658 | MPI, OMP | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#cosp2][CoSP2]] | 2,199 | MPI | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Mantevo.org#cloverleaf][CloverLeaf]] | 37,477  | MPI, OMP | C,F90 | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#ebmc][EBMC rget]] | 841 | MPI | C++, F90 | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#examinimd][ExaMiniMD]] | 6,184 | MPI, OMP | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Mantevo.org#hpccg][HPCCG]] | 1,548 | MPI, OMP | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#kriple][Kripke]] | 109,477 | MPI, OpenMP | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#minitri][MINITRI (linearAlgebra)]] | 1,534 | MPI, OMP | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#miniaero][MiniAero]] | 4,645 | MPI | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Mantevo.org#miniamr][MiniAMR]] | 8,329 | MPI | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Mantevo.org#minief][MiniFE-evo]] | 19,907 | MPI | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Mantevo.org#minismac2d][MiniSMAC2D]] | 8,329  | MPI, OMP | F90 | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/Mantevo.org#minixyce][MiniXyce]] | 2,020 | MPI | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#pennant][PENNANT]] | 3,464 | MPI, OMP | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#quicksilver][Quicksilver]] | 9,821 | MPI, OMP | C++ | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#simplemoc][SimpleMOC]] | 2,864 | MPI, OMP | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#swfft][SWFFT]] | 3,827 | MPI, OMP | C++,C,F90 | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#sw4lite][Sw4lite]] | 48,436 | MPI, OMP | C | :gear: :sunny: |
| [[https://github.com/simgrid/SMPI-proxy-apps/blob/master/ECP.org#tealeaf][TeaLeaf]] | 5,729 | MPI, OMP | F90 | :gear: :sunny: |

*** Disabled Apps
MPI not used: PathFinder, CoHMM, NuT, LCALS, RSBench. 

Using OpenMP: XSBench, Tycho2, MiniGMG, MiniMD, SNAP, Nekbone, Clover3D.

Because of other dependencies
| Benchmark | Dependency |
|-----------|------------|
| ASPA | HDF5 |
| Laghos  | HYPRE, METIS, MFEM |
| CoGL | CUDA |
| FleCSALE | Exodus, FleCSI, ParMETIS *|
| HPGMG | PETSc, OpenMP |
| MiniGhost | HDF5, H5Part |
| PlasmApp | Tirilinos |

Code source not available: AMR_Exp_Parabolic.

Using unsupported MPI primitives: EBMC (iallgather).

(*) FleCSALE (ProjectLists.txt)

TODO 
RajaPerformanecesuite, SNBONE, VPFFT.